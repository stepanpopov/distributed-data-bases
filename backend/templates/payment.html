{% extends "base.html" %}

{% block title %}–û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h2 class="mb-0">–û–ø–ª–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            </div>
            <div class="card-body">
                <div class="alert alert-info mb-4">
                    <h5>–î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è #{{ reservation.id }}</h5>
                    <p class="mb-1"><strong>–û—Ç–µ–ª—å:</strong> {{ reservation.hotel_name }}</p>
                    <p class="mb-1"><strong>–ì–æ—Å—Ç—å:</strong> {{ reservation.first_name }} {{ reservation.last_name }}</p>
                    <p class="mb-1"><strong>–î–∞—Ç—ã:</strong> {{ reservation.start_date }} - {{ reservation.end_date }}</p>
                    <p class="mb-0"><strong>–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:</strong> {{ reservation.total_price }} —Ä—É–±.</p>
                </div>

                <form method="POST" action="/pay">
                    <input type="hidden" name="reservation_id" value="{{ reservation.id }}">
                    <input type="hidden" name="amount" value="{{ reservation.total_price }}">

                    <div class="mb-4">
                        <label class="form-label">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="method" id="card" value="card" checked>
                            <label class="form-check-label" for="card">
                                üí≥ –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="method" id="online" value="online">
                            <label class="form-check-label" for="online">
                                üåê –û–Ω–ª–∞–π–Ω –ø–ª–∞—Ç–µ–∂
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="method" id="cash" value="cash">
                            <label class="form-check-label" for="cash">
                                üíµ –ù–∞–ª–∏—á–Ω—ã–µ
                            </label>
                        </div>
                    </div>

                    <div id="card_details" style="display: block;">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="card_number" class="form-label">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</label>
                                    <input type="text" class="form-control" id="card_number" placeholder="1234 5678 9012 3456">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="expiry" class="form-label">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</label>
                                    <input type="text" class="form-control" id="expiry" placeholder="–ú–ú/–ì–ì">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="cvv" class="form-label">CVV</label>
                                    <input type="text" class="form-control" id="cvv" placeholder="123">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success btn-lg">–û–ø–ª–∞—Ç–∏—Ç—å {{ reservation.total_price }} —Ä—É–±.</button>
                        <a href="/" class="btn btn-secondary">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.querySelectorAll('input[name="method"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const cardDetails = document.getElementById('card_details');
            if (this.value === 'card') {
                cardDetails.style.display = 'block';
            } else {
                cardDetails.style.display = 'none';
            }
        });
    });
</script>
{% endblock %}
