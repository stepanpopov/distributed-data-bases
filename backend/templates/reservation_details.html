{% extends "base.html" %}

{% block title %}–î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è #{{ reservation.id }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('reception_dashboard') }}">–†–µ—Å–µ–ø—à–µ–Ω</a></li>
                    {% if city_name %}
                    <li class="breadcrumb-item"><a href="{{ url_for('reception_city', city_name=city_name) }}">{{ city_name }}</a></li>
                    {% endif %}
                    <li class="breadcrumb-item active">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ #{{ reservation.id }}</li>
                </ol>
            </nav>

            <h1>üìã –î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è #{{ reservation.id }}</h1>
            <p class="text-muted">–û—Ç–µ–ª—å: {{ reservation.hotel_name }}</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏</h5>
                </div>
                <div class="card-body">
                    <p><strong>–°—Ç–∞—Ç—É—Å:</strong>
                        {% if reservation.status == 'pending' %}
                            <span class="badge bg-warning">‚è≥ –û–∂–∏–¥–∞–µ—Ç</span>
                        {% elif reservation.status == 'confirmed' %}
                            <span class="badge bg-success">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</span>
                        {% elif reservation.status == 'cancelled' %}
                            <span class="badge bg-danger">‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ</span>
                        {% endif %}
                    </p>
                    <p><strong>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</strong> {{ reservation.create_date }}</p>
                    <p><strong>–î–∞—Ç—ã –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è:</strong>
                        <br>üìÖ –ó–∞–µ–∑–¥: {{ reservation.start_date }}
                        <br>üìÖ –í—ã–µ–∑–¥: {{ reservation.end_date }}
                    </p>
                    <p><strong>–î–Ω–µ–π:</strong> {{ reservation.nights or '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</p>
                    <p><strong>–°—É–º–º–∞:</strong>
                        <span class="text-success">{{ reservation.total_price }} ‚ÇΩ</span>
                    </p>
                    <p><strong>–°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã:</strong>
                        {% if reservation.payments_status == 'paid' %}
                            <span class="badge bg-success">üí≥ –û–ø–ª–∞—á–µ–Ω–æ</span>
                        {% else %}
                            <span class="badge bg-warning">üí∞ –ù–µ –æ–ø–ª–∞—á–µ–Ω–æ</span>
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Å—Ç–µ</h5>
                </div>
                <div class="card-body">
                    <p><strong>–ò–º—è:</strong> {{ reservation.first_name }} {{ reservation.last_name }}</p>
                    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> üìû {{ reservation.phone_number }}</p>
                    {% if reservation.email %}
                    <p><strong>Email:</strong> ‚úâÔ∏è {{ reservation.email }}</p>
                    {% endif %}
                    {% if reservation.document %}
                    <p><strong>–î–æ–∫—É–º–µ–Ω—Ç:</strong> üìÑ {{ reservation.document }}</p>
                    {% endif %}
                    {% if reservation.loyalty_card_id %}
                    <p><strong>–ö–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏:</strong> üèÖ ID {{ reservation.loyalty_card_id }}</p>
                    {% endif %}
                    {% if reservation.bonus_points %}
                    <p><strong>–ë–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã:</strong> ‚≠ê {{ reservation.bonus_points }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {% if reservation.room_id or reservation.category_name %}
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5>üè® –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–º–µ—Ä–µ</h5>
                </div>
                <div class="card-body">
                    {% if reservation.room_id %}
                        <p><strong>ID –Ω–æ–º–µ—Ä–∞:</strong> #{{ reservation.room_id }}</p>
                    {% endif %}
                    {% if reservation.room_number %}
                        <p><strong>–ù–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã:</strong> {{ reservation.room_number }}</p>
                    {% endif %}
                    {% if reservation.category_name %}
                        <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ reservation.category_name }}</p>
                    {% endif %}
                    {% if reservation.floor %}
                        <p><strong>–≠—Ç–∞–∂:</strong> {{ reservation.floor }}</p>
                    {% endif %}
                    {% if reservation.view %}
                        <p><strong>–í–∏–¥:</strong> {{ reservation.view }}</p>
                    {% endif %}
                    {% if reservation.requested_room_category %}
                        <p><strong>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> ID {{ reservation.requested_room_category }}</p>
                    {% endif %}
                    {% if reservation.total_guest_number %}
                        <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π:</strong> üë• {{ reservation.total_guest_number }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="row mt-4">
        <div class="col-md-12">
            <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                {% if city_name %}
                <a href="{{ url_for('reception_city', city_name=city_name) }}" class="btn btn-primary me-2">
                    ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
                </a>
                {% else %}
                <a href="{{ url_for('reception_dashboard') }}" class="btn btn-primary me-2">
                    ‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ—Å–µ–ø—à–µ–Ω—É
                </a>
                {% endif %}
                <a href="/api/reservations/{{ reservation.id }}" class="btn btn-outline-secondary" target="_blank">
                    üîó JSON API
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
