{% extends "base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å —Ä–µ—Å–µ–ø—à–µ–Ω–∞{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h1>üè® –ü–∞–Ω–µ–ª—å —Ä–µ—Å–µ–ø—à–µ–Ω–∞</h1>
            <p class="text-muted">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
        </div>
    </div>

    <div class="row">
        {% for city in cities %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-light shadow-sm">
                <div class="card-header bg-light border-bottom">
                    <h5 class="card-title mb-0 text-secondary">
                        üèôÔ∏è {{ city.city_name }}
                    </h5>
                </div>
                <div class="card-body">
                    <div class="text-center">
                        <h2 class="text-primary">{{ city.reservations_count }}</h2>
                        <p class="text-muted">–∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
                    </div>
                    
                    {% if city.reservations_count > 0 %}
                        <div class="alert alert-light border text-center mb-2">
                            <small class="text-secondary">
                                {% if city.reservations_count <= 5 %}
                                    üìç –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
                                {% elif city.reservations_count <= 15 %}
                                    ‚ö° –°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞
                                {% else %}
                                    üî• –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
                                {% endif %}
                            </small>
                        </div>
                    {% endif %}
                </div>
                <div class="card-footer bg-light">
                    <a href="{{ url_for('reception_city', city_name=city.city_name) }}" 
                       class="btn btn-outline-primary btn-block">
                        üè® –†–∞–±–æ—Ç–∞—Ç—å —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {% if not cities %}
    <div class="row">
        <div class="col-md-12">
            <div class="alert alert-light border text-center">
                <h4 class="text-secondary">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤</h4>
                <p class="text-muted">–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç –≥–æ—Ä–æ–¥–æ–≤ —Å –æ—Ç–µ–ª—è–º–∏.</p>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="row mt-4">
        <div class="col-md-12">
            <div class="card border-light shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="text-secondary">üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å–µ–ø—à–µ–Ω–∞</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="text-center p-3 bg-light rounded">
                                <h3 class="text-secondary">{{ cities|length }}</h3>
                                <p class="text-muted mb-0">–ì–æ—Ä–æ–¥–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="text-center p-3 bg-light rounded">
                                <h3 class="text-success">{{ cities|sum(attribute='reservations_count') }}</h3>
                                <p class="text-muted mb-0">–ê–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}